# 图书销售管理
### 图书销售管理系统需求：
图书销售管理系统主要用户分为两类：库存管理员、顾客；   
库存管理员可以管理图书的库存（出库、入库）、查询以及新增图书；    
顾客有查询图书、购买图书、结账权限、结账时，会让用户选择是否购买附赠品（CD、书包装、钢笔），并且结账后，要打出详细的结账单项。其中，附赠品不能单独购买；   
##### 分析：
需求中有两类用户，库存管理员和顾客，因为他们的身份不同，能做的操作也不一样；管理员可以查询图书、出库、入库和新增图书；而顾客只能查询图书，买书和结账；   
也就是因为他们的身份不同，就决定了他们的权限不同；   
在这里身份可以用角色来表示；     
这里就涉及到了用户、角色、权限的问题；   
其实在生活中，企业组织结构里也是常谈的问题；   
##### 什么是组织结构：
组织结构就是指，全体成员为实现任务目标，在管理工作中进行分工协作，在职务范围、责任、权利方面所形成的结构体系；  
因为角色不同，权限自然也就不同；   
角色决定了员工拥有哪些权限；    
角色决定权限，用户授权角色；这样做的好处是：可扩展，可维护；    
当在实际开发当中有类似关于权限划分的问题，我们一般都设置成用户、角色、权限的模式；   
##### 在程序当中
- 用户：系统的具体操作者；
- 角色：为了对拥有相似权限的用户进行分类管理；
- 权限：具体的操作；

##### 看一下需求中
- 涉及的对象：有用户、角色、权限、图书、附赠品、
- 涉及的功能块：权限管理、库存管理、结账；
那么这个系统就可以采用：   
用户、角色、权限的模式；   
先来设计这种模式的结果图：   
##### 先来看如何设计权限： 
权限是针对行为的，而前面我们讲接口时说过，一般把行为抽象成接口，所以我们把权限抽象成接口；    
##### 这里的权限有两种，   
所以我们将顾客权限抽象成接口，它有查询图书，购买图书，购买附赠品和结账的方法；   
再抽象库存管理员接口，有入库、出库、新增图书和查询图书的方法；    
然后再来看角色；    
角色负责向用户解读权限的，比如有权无权进行操作、执行哪些对应的操作等；   
我们将角色抽象成抽象类，它具有顾客权限、库存管理员权限、角色描述的属性；以及角色描述的setter/getter方法，因为角色中具有顾客权限的属性，所以要分配是否有权进行查询图书、购买图书、购买附赠品和结账的操作；   
同时又具有库存管理员权限的属性，也要分配是否有权进行入库、出库、新增图书和查询图书的操作；    
##### 最后，我们来看用户，
- 用户：我们就定义成普通类，每个用户都有相应的角色，所以将角色作为用户的属性，因为用户本身具有与权限无关的操作，比如：注册、登陆的方法，还有出库、入库、新增图书、查询图书、购买图书、购买附赠品和结账的方法；

用户、角色、权限的结构图，已经初步设计好了，我们再进一步来看这样设计的好处，以及三者的关系；
##### 先来看权限部分的设计：
我们将顾客权限抽象成接口以后，比如，普通顾客结账是100%，我们设计一个普通顾客类来实现接口；   
再比如VIP顾客七折结账，我们再设计一个VIP顾客类来实现接口，或者还有其它类型的顾客结账方式，实现起来一样；  
同理，库存管理员的权限接口也是如此；   
这里，我们设计一个默认库存管理类，来实现库存管理权限接口；这样一来，需求中的所有功能操作也就确定下来了；   
然后，我们再确定需求中有哪些角色；   
我们将角色抽象成抽象类以后，由于本图书销售系统是为了顾客和库存管理员所使用的，所以我们可以设计成两种角色，也就是顾客角色、库存管理员角色；同时为这两种角色分配相应的权限；
最后，就是在用户类中，给具体的用户授权角色；   
那么，这个具体的用户能做的符他合角色的操作，就确定下来了；   



